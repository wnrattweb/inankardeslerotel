/* 
	InstaLink
	Version: 2.1.3
	Release date: Thu Aug 03 2017
	
	elfsight.com
	
	Copyright (c) 2017 Elfsight, LLC. ALL RIGHTS RESERVED
 */

!function(e,t,a){function r(e,t,a,r,n){this._clientId=e,this._accessToken=t,this._lastPagination={},this._initialPagination={},this._loading=!1,this._cacheMediaTime=a,this._alternativeApiUrl=r,this._cachedProfile=null,this._isSandbox=n}function n(t,a){var n=this;n._id=t,n._structure={},n._structure.$root=e(a),n._structure.style=null,n._params={},n._source={},n._data={},n._data.feedCache=[],n._curBreakpoint=null,n._grid=null,n._prevGrid=null,n._state="loading",n._properties={},n._curLangData=null,n._api=null,n._sizesHash=null,n._oldSizesHash=null,n._params.accessToken&&(n._atUserId=n._params.accessToken.split(".")[0]),n._defineParams(),n._atUserId=null,n._isSandbox=!n._params.api&&n._params.accessToken&&!n._params.username,n._defineSource(),n._defineLanguage(),n._api=new r(n._params.clientId,n._params.accessToken,parseInt(n._params.cacheMediaTime,10),n._params.api,n._isSandbox)}function i(){e("[data-il]").each(function(e,t){n.init(s++,t).run()})}var s=0;t.Array.prototype.filter||(t.Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new t.TypeError;var a=t.Object(this),r=a.length>>>0;if("function"!=typeof e)throw new t.TypeError;for(var n=[],i=arguments.length>=2?arguments[1]:void 0,s=0;s<r;s++)if(s in a){var o=a[s];e.call(i,o,s,a)&&n.push(o)}return n});r.prototype=function(){},r.prototype._apiUrl="https://api.instagram.com/v1",r.prototype.getApiUrl=function(){return this._alternativeApiUrl?this._alternativeApiUrl.replace(/\/*$/,"")+"/":r.prototype._apiUrl},r.prototype.isAlternativeApi=function(){return this.getApiUrl()!=r.prototype._apiUrl},r.prototype.hasNextPage=function(a){var r=this;return e.isArray(a)||(a=[a]),t.Object.keys(this._lastPagination).some(function(e){return!!~a.indexOf(e)&&r._lastPagination[e]&&r._lastPagination[e].next_url})},r.prototype._hasInitialPage=function(a){var r=this;return e.isArray(a)||(a=[a]),t.Object.keys(this._initialPagination).some(function(e){return!!~a.indexOf(e)&&r._initialPagination[e]&&r._initialPagination[e].next_url})},r.prototype.resetPagination=function(t){var a=this;e.isArray(t)||(t=[t]),e.each(t,function(e){a._initialPagination[e]&&(a._lastPagination[e]=a._initialPagination[e])})},r.prototype.isLoading=function(){return this._loading},r.prototype.get=function(t,a,r){var n=null,i=null,s=null,o=this;return r=void 0===r||!!r,a=e.isPlainObject(a)?a:{},a=e.extend(!1,{},o.parseQuery(t.replace(/^[^\?]+/,"")),a),o.isAlternativeApi()?(a.path="/v1"+t.replace("/v1","").replace(/\?[^\?]+$/,""),t=o.getApiUrl()+"?"+e.param(a)):(this._clientId&&(a.client_id=this._clientId),this._accessToken&&(a.access_token=this._accessToken),t=(r?o.getApiUrl():"")+t.replace(/\?[^\?]+$/,"")+"?"+e.param(a)),i=e.Deferred(),n=this.getCached(t)||e.ajax({url:t,dataType:"jsonp"}),s={originalPromise:n},n.done(function(a,r){s.originalResponseData=a,200!==a.meta.code?(e.extend(!0,s,{meta:a.meta}),i.reject(s)):(e.extend(!0,s,{data:a.data}),r&&o.cache(t,a),i.resolve(s))}),i.promise()},r.prototype.parseQuery=function(e){return(e||document.location.search).replace(/(^\?)/,"").split("&").map(function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0]},r.prototype.getCached=function(a){var r,n=e.Deferred(),i=this;return t.localStorage?(r=localStorage.getItem(a),!(r=r?JSON.parse(r):null)||parseInt(r.duration,10)!==i._cacheMediaTime||r.expired<Date.now()/1e3?(localStorage.removeItem(a),null):(setTimeout(function(){n.resolve(r.value)},50),n.promise())):null},r.prototype.cache=function(e,t){var a=this._cacheMediaTime;if(a)try{localStorage.setItem(e,JSON.stringify({duration:a,expired:Date.now()/1e3+a,value:t}))}catch(e){localStorage.clear()}},r.prototype.getUser=function(t){var a=null,r=this;return a=e.Deferred(),t=e.trim(t),r.isAlternativeApi()?r.get("/users/"+t+"/").done(function(e){r._cachedProfile=e.data,a.resolve({data:[e.data]})}).fail(function(e){a.reject(e)}):r.get("/users/search",{q:t}).done(function(e){e.data=e.data.filter(function(e){return e.username.toLowerCase()===t.toLowerCase()}),a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise()},r.prototype.getProfile=function(a){a=t.parseInt(a,10);var r=e.Deferred();return this.isAlternativeApi()?(r.resolve({data:this._cachedProfile}),r.promise()):this.get("/users/"+(this._isSandbox?"self":a))},r.prototype.getRecentUserMedia=function(a,r,n){var i=null,s=this;return i=e.Deferred(),n=t.parseInt(n,10),this._isSandbox&&(a="self"),this.get("/users/"+a+"/media/recent",{count:r?33:n}).done(function(t){var o;r&&e.isArray(r)&&(r=r.filter(function(e){return e.toLowerCase()}),t.data=t.data.filter(function(e){return e.tags&&e.tags.some(function(e){return!!~r.indexOf(e.toLowerCase())})})),o=t.data,s._fetchMedia(t,i,o,n,r,null,a)}).fail(function(e){i.reject(e)}),i},r.prototype.getRecentTagMedia=function(a,r,n){var i=null,s=this;return i=e.Deferred(),a=e.trim(a),n=t.parseInt(n,10),this.get("/tags/"+a+"/media/recent",{count:n}).done(function(t){var o;r&&e.isArray(r)&&(t.data=t.data.filter(function(e){return!~r.indexOf(e.user.username)})),o=t.data,s._fetchMedia(t,i,o,n,null,r,a)}).fail(function(e){i.reject(e)}),i},r.prototype.getRecentTagsMedia=function(t,a,r){var n=null,i=[],s=this;return 1===t.length?s.getRecentTagMedia(t[0],a,r):(t=t.map(function(t){return e.trim(t)}),t=t.filter(function(e){return!!e}),n=e.Deferred(),e.each(t,function(e,t){i.push(s.getRecentTagMedia(t,a,r))}),e.when.apply(e,i).done(function(){var t=[],a=null;e.each(arguments,function(e,r){a||(a=r),r&&r.data&&(t=t.concat(r.data))}),t=t.filter(function(e){return!t.some(function(t){return t!==e&&e.id===t.id})}),t=t.sort(function(e,t){return e.created_time<t.created_time?1:e.created_time>t.created_time?-1:0}),t=t.slice(0,r),a&&a.data&&(a.data=t),n.resolve(a)}).fail(function(e){n.reject(e)}),n.promise())},r.prototype.loadNextPage=function(t,a,r,n){var i=[],s=null,o=this;return s=e.Deferred(),this._loading=!0,o.hasNextPage(t)?1===(t=e.isArray(t)?t:[t]).length?this.get(o._lastPagination[t[0]].next_url,{count:a||r?33:n},!1).done(function(i){var l;a&&e.isArray(a)&&(i.data=i.data.filter(function(e){return e.tags&&e.tags.some(function(e){return!!~a.indexOf(e)})})),r&&e.isArray(r)&&(i.data=i.data.filter(function(e){return!~r.indexOf(e.user.username)})),l=i.data,o._fetchMedia(i,s,l,n,a,r,t)}).fail(function(e){s.reject(e)}):(e.each(t,function(t,a){var l=null;o.hasNextPage(a)&&(l=e.Deferred(),o.get(o._lastPagination[a].next_url,{count:n},!1).done(function(e){var t;t=e.data,o._fetchMedia(e,s,t,n,null,r,a)}).fail(function(e){s.reject(e)}),i.push(l))}),e.when.apply(e,i).done(function(){var t=[],a=null;e.each(arguments,function(e,r){a||(a=r),r&&r.data&&(t=t.concat(r.data))}),t=t.filter(function(e){return!t.some(function(t){return t!==e&&e.id===t.id})}),t=t.sort(function(e,t){return e.created_time<t.created_time?1:e.created_time>t.created_time?-1:0}),t=t.slice(0,n),a.data=t,s.resolve(a)}).fail(function(e){s.reject(e)})):s.reject(),s.always(function(){o._loading=!1}),s.promise()},r.prototype._fetchMedia=function(t,a,r,n,i,s,o){var l=this;t&&t.originalResponseData&&(n-=t.data.length+1,o&&(l._lastPagination[o]=t.originalResponseData.pagination),o&&!l._hasInitialPage(o)&&(l._initialPagination[o]=t.originalResponseData.pagination),n>0&&t.originalResponseData.pagination&&t.originalResponseData.pagination.next_url?l.get(t.originalResponseData.pagination.next_url,{count:i||s?33:n},!1).done(function(t){i&&e.isArray(i)&&(t.data=t.data.filter(function(e){return e.tags&&e.tags.some(function(e){return!!~i.indexOf(e)})})),s&&e.isArray(s)&&(t.data=t.data.filter(function(e){return!~s.indexOf(e.user.username)})),r=r.concat(t.data),l._fetchMedia(t,a,r,n,i,s,o)}).fail(function(e){a.reject(e)}):(t.data=r,a.resolve(t)))},n.prototype=function(){},n.REGEX_HASHTAG=/[,\s]+/i,n.VERSION="2.1.3",n.prototype._defaultParams={api:null,clientId:"",accessToken:"",username:"",hashtag:"",lang:"en",bgColor:"#285989",contentBgColor:"#f8f8f8",fontColor:"#ffffff",width:"270px",height:"350px",imageSize:"medium",scroll:"false",ban:"",showHeading:"true",cacheMediaTime:0},n.prototype._templates={css:"#instaLink_{$id} {width: {$width}; height: {$height}; } #instaLink_{$id}, #instaLink_{$id} .instalink-feed-wrapper { background: {$contentBgColor} } #instaLink_{$id} .instalink-header, #instaLink_{$id} a.instalink-panel-subscribe {background-color: {$bgColor}; } #instaLink_{$id} .instalink-header-name a, #instaLink_{$id} .instalink-header-name, #instaLink_{$id} a.instalink-panel-subscribe {color: {$fontColor}; } #instaLink_{$id} .instalink-feed-post {width: {$postWidth}; height: {$postHeight}; } #instaLink_{$id} .instalink-feed-post span {width: {$postImgWidth}; height: {$postImgHeight}; margin-top: {$postImgMTop}; margin-left: {$postImgMLeft} } #instaLink_{$id} .instalink-feed-loader { width: {$width}; }",cap:'<div class="instalink-cap"></div>',error:'<div class="instalink-alert">An error occurred. See console for the details.</div>',content:'<div class="instalink-content"></div>',headerUser:'<a class="instalink-header" href="{$url}" target="_blank"> <img class="instalink-header-pic" src="{$pic}" alt="{$name}"/> <span class="instalink-header-name">{$name}</span> <span class="instalink-header-logo"></span> </a>',headerTag:'<div class="instalink-header"> <span class="instalink-header-name">{$name}</span> <span class="instalink-header-logo"></span> </div>',panel:'<div class="instalink-panel"><span class="instalink-panel-posts instalink-panel-counter"> <i class="instalink-panel-counter-value">{$posts}</i><span class="instalink-panel-counter-label">{~posts}</span> </span><span class="instalink-panel-subsribers instalink-panel-counter"> <i class="instalink-panel-counter-value">{$followers}</i> <span class="instalink-panel-counter-label">{~followers}</span> </span> <span class="instalink-panel-following instalink-panel-counter"> <i class="instalink-panel-counter-value">{$following}</i> <span class="instalink-panel-counter-label">{~following}</span> </span> <a class="instalink-panel-subscribe" href="{$url}" target="_blank">{~follow}</a> </div>',scrollbar:'<div class="instalink-scrollbar"></div>',scrollbarSlider:'<div class="instalink-scrollbar-slider"></div>',feedWrapper:'<div class="instalink-feed-wrapper">',feedInner:'<div class="instalink-feed-inner"></div>',feedContainer:'<div class="instalink-feed-container"></div>',feedEmpty:'<div class="instalink-feed-empty"><span class="instalink-feed-empty-text">There are no images yet.</span></div>',feed:'<div class="instalink-feed"></div>',feedLoader:'<div class="instalink-feed-loader"></div>',post:'<a href="{$url}" target="_blank" class="instalink-feed-post"> <span><img src="{$pic}" alt=""></span> </a>',consoleError:"[#InstaLink_{$id}: {$message}]"},n.prototype._breakpoints={small:[{minWidth:1970,rowLength:21},{minWidth:1870,rowLength:21},{minWidth:1870,rowLength:20},{minWidth:1770,rowLength:19},{minWidth:1670,rowLength:18},{minWidth:1570,rowLength:17},{minWidth:1470,rowLength:16},{minWidth:1370,rowLength:15},{minWidth:1270,rowLength:14},{minWidth:1170,rowLength:13},{minWidth:1070,rowLength:12},{minWidth:970,rowLength:11},{minWidth:870,rowLength:10},{minWidth:770,rowLength:9},{minWidth:670,rowLength:8},{minWidth:570,rowLength:7},{minWidth:470,rowLength:6},{minWidth:370,rowLength:5},{minWidth:90,rowLength:4}],medium:[{minWidth:1980,rowLength:16},{minWidth:1850,rowLength:15},{minWidth:1720,rowLength:14},{minWidth:1590,rowLength:13},{minWidth:1460,rowLength:12},{minWidth:1330,rowLength:11},{minWidth:1200,rowLength:10},{minWidth:1070,rowLength:9},{minWidth:940,rowLength:8},{minWidth:810,rowLength:7},{minWidth:680,rowLength:6},{minWidth:550,rowLength:5},{minWidth:520,rowLength:5},{minWidth:390,rowLength:4},{minWidth:90,rowLength:3}],large:[{minWidth:1920,rowLength:8},{minWidth:1660,rowLength:8},{minWidth:1400,rowLength:7},{minWidth:1140,rowLength:6},{minWidth:980,rowLength:5},{minWidth:720,rowLength:4},{minWidth:460,rowLength:3},{minWidth:90,rowLength:2}],xlarge:[{minWidth:2200,rowLength:6},{minWidth:1800,rowLength:5},{minWidth:1400,rowLength:4},{minWidth:1200,rowLength:3},{minWidth:600,rowLength:2},{minWidth:90,rowLength:1}]},n.prototype._i18n={ru:{posts:"публикации",followers:"подписчики",following:"подписки",follow:"Подписаться"},en:{posts:"posts",followers:"followers",following:"following",follow:"Follow"},de:{posts:"beiträge",followers:"abonnenten",following:"abonnement",follow:"Folgen"},nl:{posts:"berichten",followers:"volgers",following:"volgend",follow:"Volgen"},es:{posts:"publicaciones",followers:"seguidores",following:"seguidos",follow:"Seguir"},fr:{posts:"publications",followers:"abonnés",following:"abonnement",follow:"S'abonner"},pl:{posts:"posty",followers:"obserwujący",following:"obserwujacych",follow:"Obserwuj"},sv:{posts:"inlägg",followers:"följare",following:"följer",follow:"Följ"},"pt-BR":{posts:"publicações",followers:"seguidores",following:"seguidos",follow:"Seguir"},tr:{posts:"gönderiler",followers:"takipçiler",following:"takip edilen",follow:"Takip et"},"zh-HK":{posts:"帖子",followers:"天注者",following:"天注",follow:"天注"},ko:{posts:"게시물",followers:"팔로워",following:"팔로잉",follow:"팔로우"},ja:{posts:"投稿",followers:"フォロワー",following:"フォロワー中",follow:"フォローする"},id:{posts:"kiriman",followers:"pengikut",following:"mengikuti",follow:"Ikuti"},he:{rtl:!0,posts:"כתבות",followers:"עוקבים",following:"עוקב",follow:"עקוב"},it:{posts:"post",followers:"seguaci",following:"segui già",follow:"segui"}},n.init=function(e,t){return new n(e,t)},n.formatNumber=function(e){var a=null,r=null;return e<1e3?e:(e>1e6?(r=e/1e6,a="m"):e>1e3&&(r=e/1e3,a="k"),t.parseInt(r,10)!==r&&(r=r.toFixed(1)),r+a)},n.prototype._defineLanguage=function(){var e=this;e._curLangData=e._i18n[e._params.lang]||e._i18n.en},n.prototype._defineParams=function(){var t=this;e.each(t._defaultParams,function(a,r){var n;n="data-il-"+a.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),t._params[a]=e.trim(t._structure.$root.attr(n))||r}),t._properties.scroll="true"===t._params.scroll},n.prototype._defineSource=function(){var e=null,t=null,a=this;a._params.source&&!a._params.username&&(e=a._params.source.substr(0,1),~["@","#"].indexOf(e)?(t=a._params.source.substr(1),"@"===e?a._params.username=t:a._params.hashtag=[t]):a._params.username=a._params.source),a._params.username||a._isSandbox?(a._source.type="user",a._source.name=a._params.username,a._params.hashtag&&(a._source.hashfilter=a._params.hashtag.split(n.REGEX_HASHTAG))):a._params.hashtag&&(a._source.type="tag",a._source.tags=a._params.hashtag.split(n.REGEX_HASHTAG)),a._params.ban&&(a._source.banlist=a._params.ban.split(n.REGEX_HASHTAG))},n.prototype._updateStyles=function(){var a=null,r=this;r._structure.$style||(r._structure.$style=e("<style>",{type:"text/css"}),r._structure.$root.after(r._structure.$style)),r._grid&&(a=r._grid.cellWidth>r._grid.cellHeight?.9*r._grid.cellHeight:.9*r._grid.cellWidth,a=t.parseInt(a,10));var n=r._params.width;n&&parseInt(n,10)==n&&(n+="px");var i=r._params.height;i&&parseInt(i,10)==i&&(i+="px"),r._structure.$style.html(r._compileTemplate("css",{id:r._id,width:n,height:i,bgColor:r._params.bgColor,contentBgColor:r._params.contentBgColor,fontColor:r._params.fontColor,postWidth:r._grid?r._grid.cellWidth+"px":"initial",postHeight:r._grid?r._grid.cellHeight+"px":"initial",postImgWidth:r._grid?a+"px":"initial",postImgHeight:r._grid?a+"px":"initial",postImgMTop:r._grid?t.parseInt(-a/2,10)+"px":0,postImgMLeft:r._grid?t.parseInt(-a/2,10)+"px":0}))},n.prototype._compileTemplate=function(a,r){var n=null,i=null,s=this;return(n=s._templates[a])&&"[object String]"===t.Object.prototype.toString.call(n)?(i=e.isPlainObject(r)?n.replace(/\{\$([\w\W]+?)}/g,function(e,t){return r[t]}):n,e.isPlainObject(s._curLangData)&&(i=i.replace(/\{~([\w\W]+?)}/g,function(e,t){return s._curLangData[t]})),i):null},n.prototype._setState=function(e){~["loading","ready","error"].indexOf(e)&&(this._state=e,this._structure.$root.removeClass("instalink-ready instalink-loading instalink-error").addClass("instalink-"+e))},n.prototype._prepare=function(){var t=this;"false"===t._params.showHeading&&t._structure.$root.addClass("instalink-hide-heading"),t._structure.$root.addClass("instalink").addClass("instalink-"+t._source.type).addClass("instalink-image-size-"+t._params.imageSize).attr("id","instaLink_"+t._id),t._properties.scroll&&t._structure.$root.addClass("instalink-scroll"),t._structure.$root.empty(),t._structure.$cap=e(t._templates.cap),t._structure.$root.append(t._structure.$cap),t._structure.$error=e(t._templates.error),t._structure.$root.append(t._structure.$error),t._structure.$content=e(t._templates.content),t._structure.$root.append(t._structure.$content),t._structure.$feedWrapper=e(t._templates.feedWrapper),t._structure.$content.append(t._structure.$feedWrapper),t._setState(t._state),t._defineBreakpoint(),t._defineGrid(),t._updateStyles(),t._adjust()},n.prototype._defineBreakpoint=function(){var t,a=null,r=null,n=this;t=n._undusk(),n._breakpoints.hasOwnProperty(n._params.imageSize)&&(r=n._breakpoints[n._params.imageSize]),r&&r.length&&(e.each(r,function(e,t){if(a)return!1;n._structure.$feedWrapper.innerWidth()>t.minWidth&&(a=t)}),a||(a=r[0])),n._curBreakpoint=a,t()},n.prototype._defineGrid=function(){var e,a={},r=this;r._curBreakpoint&&(e=r._undusk(),r._prevGrid=r._grid,a.width=r._structure.$feedWrapper.innerWidth(),a.height=r._structure.$feedWrapper.innerHeight(),a.columnsCount=r._curBreakpoint.rowLength,a.cellWidth=t.Math.floor(a.width/a.columnsCount),a.rowsCount=t.Math.round(a.height/a.cellWidth),0===a.rowsCount&&(a.rowsCount=1),a.cellHeight=Math.floor(a.height/a.rowsCount),a.rowsCountDefault=a.rowsCount,r._properties.scroll&&(a.rowsCount+=2),a.cellsCount=a.columnsCount*a.rowsCount,a.cellsCountDefault=a.columnsCount*a.rowsCountDefault,r._grid=a,e())},n.prototype._undusk=function(){var t=this;return $hiddenElements=t._structure.$root.parents().filter(function(){return"none"===e(this).css("display")}),$hiddenElements.css({display:"block",visibility:"hidden"}),function(){$hiddenElements.css({display:"none",visibility:""})}},n.prototype._loadFeed=function(){var t=null,a=this;if(t=e.Deferred(),!a._grid)return t.reject(),t.promise();var r;return!a._properties.scroll&&a._data.feedCache&&a._data.feedCache.length>=a._grid.cellsCount?(a._data.feed=a._data.feedCache.slice(0,a._grid.cellsCount),t.resolve()):(a._setState("loading"),(a._isSandbox||"user"===a._source.type)&&a._data.profile&&a._data.profile.id?(r=a._api.isAlternativeApi()?a._data.profile.username:a._data.profile.id,a._api.getRecentUserMedia(r,a._source.hashfilter,a._grid.cellsCount).done(function(e){e&&e.data&&(a._data.feed=e.data,e.data.length>a._data.feedCache.length&&(a._data.feedCache=e.data),a._setState("ready"),t.resolve())}).fail(function(e){e&&e.meta&&e.meta.error_message&&a._log(e.meta.error_type+" | "+e.meta.error_message),t.reject()})):"tag"===a._source.type?a._api.getRecentTagsMedia(a._source.tags,a._source.banlist,a._grid.cellsCount).done(function(e){e&&e.data&&(a._data.feed=e.data,e.data.length>a._data.feedCache.length&&(a._data.feedCache=e.data),a._setState("ready"),t.resolve())}).fail(function(e){e.meta._additional&&(e.meta.error_message+=" | "+e.meta._additional),e&&e.meta&&e.meta.error_message&&a._log(e.meta.error_type+" | "+e.meta.error_message),t.reject()}):t.reject()),t.promise()},n.prototype._setListeners=function(){var a=this;e(t).on("resize.instaLink-"+a._id,function(){a._adjust()}),e(t).on("load.instaLink-"+a._id,function(){a._adjust()}),a._structure.$feedContainer.on("scroll",function(){a._scroll()})},n.prototype._scroll=function(){var e=null,t=null,a=null,r=null,n=this;n._properties.scroll&&(r="tag"===n._source.type?n._source.tags:n._api.isAlternativeApi()?n._data.profile.username:n._data.profile.id,e=n._structure.$feedInner.innerHeight()-n._structure.$feedContainer.innerHeight(),t=n._structure.$feedContainer.scrollTop(),n._showScrollbar(t,e),a=n._params.imageSize.toLowerCase&&"xlarge"===n._params.imageSize.toLowerCase()?0:n._grid.cellHeight,e-t<=a&&n._api.hasNextPage(r)&&!n._api.isLoading()&&n._api.loadNextPage(r,n._source.hashfilter,n._source.banlist,n._grid.cellsCount).done(function(a){n._appendFeed(a.data),n._showScrollbar(t,e)}).fail(function(e){e&&e.meta&&e.meta.error_message&&n._log(e.meta.error_type+" | "+e.meta.error_message)}))},n.prototype._adjustMedia=function(e){e.removeClass("instalink-feed-post-landscape instalink-feed-post-portrait instalink-feed-post-square");var t=e.find("img"),a=t.width()/t.height();a>1?e.addClass("instalink-feed-post-landscape"):a<1?e.addClass("instalink-feed-post-portrait"):e.addClass("instalink-feed-post-square")},n.prototype._adjust=function(t){var a=null,r=this;r._sizesHash=r._structure.$root.width()+"."+r._structure.$root.height(),r._defineBreakpoint(),r._defineGrid(),r._updateStyles(),a=r._structure.$root.innerWidth(),t?r._adjustMedia(t):(r._structure.$root.removeClass("instalink-small instalink-tiny instalink-medium instalink-large"),a>399?r._structure.$root.addClass("instalink-large"):a>299?r._structure.$root.addClass("instalink-medium"):a<=209?r._structure.$root.addClass("instalink-tiny"):a<=264&&r._structure.$root.addClass("instalink-small"),r._structure.$feed&&r._structure.$feed.find(".instalink-feed-post").removeClass("instalink-feed-post-landscape instalink-feed-post-portrait instalink-feed-post-square").each(function(t,a){var r=e(a),n=r.find("img"),i=n.width()/n.height();i>1?r.addClass("instalink-feed-post-landscape"):i<1?r.addClass("instalink-feed-post-portrait"):r.addClass("instalink-feed-post-square")}),r._prevGrid&&r._prevGrid.cellsCount===r._grid.cellsCount?r._sizesHash!==r._oldSizesHash&&r.updateFeed():r._loadFeed().done(function(){r.updateFeed()}),r._oldSizesHash=r._sizesHash)},n.prototype._showScrollbar=function(a,r){var n=null,i=null,s=this;!s._structure.$feedContainer||s._data.feed.length<s._grid.cellsCountDefault||(s._structure.$scrollbar||(s._structure.$scrollbar=e(s._compileTemplate("scrollbar")),s._structure.$scrollbarSlider=e(s._compileTemplate("scrollbarSlider")),s._structure.$scrollbar.append(s._structure.$scrollbarSlider),s._structure.$feedWrapper.append(s._structure.$scrollbar)),n=s._structure.$feedWrapper.innerHeight()/s._structure.$feedInner.innerHeight()*s._structure.$feedWrapper.innerHeight(),i=a&&r?a/r*(s._structure.$feedWrapper.innerHeight()-n):0,s._structure.$scrollbarSlider.css({height:n,transform:"translate(0, "+i+"px)"}),s._structure.$scrollbar.addClass("visible"),s._scrollbarTimer||t.clearTimeout(s._scrollbarTimer),s._scrollbarTimer=t.setTimeout(function(){s._structure.$scrollbar.removeClass("visible")},700))},n.prototype._log=function(e,a){var r=null;t.console&&"[object Function]"===t.Object.prototype.toString.call(t.console.log)&&((a=void 0===a||!!a)&&this._setState("error"),r=this._compileTemplate("consoleError",{id:this._id,message:e}),t.console.log(r))},n.prototype.run=function(){var e=this;e._updateStyles(),e._prepare(),e._rtl&&e._structure.$root.addClass("instalink-rtl"),e._isSandbox?e._api.getProfile().done(function(t){e._data.profile=t.data,e._loadFeed().done(function(){e.updateContent()&&(e._setState("ready"),e._setListeners(),e._adjust())})}).fail(function(t){t&&t.meta&&t.meta.error_message&&e._log(t.meta.error_type+" | "+t.meta.error_message)}):"user"===e._source.type?e._api.getUser(e._source.name).done(function(t){t.data.length?e._api.getProfile(t.data[0].id).done(function(a){a.data.id=t.data[0].id,e._data.profile=a.data,e._loadFeed().done(function(){e.updateContent()&&(e._setState("ready"),e._setListeners(),e._adjust())})}).fail(function(t){t&&t.meta&&t.meta.error_message&&e._log(t.meta.error_type+" | "+t.meta.error_message)}):e._log("User @"+e._source.name+" is not found.")}).fail(function(t){t&&t.meta&&t.meta.error_message&&(t.meta._additional&&(t.meta.error_message+=" | "+t.meta._additional),e._log(t.meta.error_type+" | "+t.meta.error_message))}):"tag"===e._source.type&&e._loadFeed().done(function(){e.updateContent()&&(e._setState("ready"),e._setListeners(),e._adjust())})},n.prototype.updateContent=function(){var t=this;return!(!t._data.feed||!t._structure.$content)&&(t._structure.$content.html(""),t._structure.$feedContainer=e(t._templates.feedContainer),t._structure.$feedInner=e(t._templates.feedInner),t._structure.$feed=e(t._templates.feed),t._structure.$feedInner.append(t._structure.$feed),t._structure.$feedContainer.append(t._structure.$feedInner),t._structure.$feedWrapper.append(t._structure.$feedContainer),t._structure.$content.append(t._structure.$feedWrapper),t._properties.scroll&&(t._structure.$feedLoader=e(t._templates.feedLoader),t._structure.$feedInner.append(t._structure.$feedLoader)),"false"!==t._params.showHeading&&((t._isSandbox||"user"===t._source.type)&&t._data.profile?(t._structure.$header=e(t._compileTemplate("headerUser",{name:t._data.profile.username,url:"https://instagram.com/"+t._data.profile.username+"/",pic:t._data.profile.profile_picture})),t._structure.$content.prepend(t._structure.$header),t._structure.$panel=e(t._compileTemplate("panel",{posts:n.formatNumber(t._data.profile.counts.media),followers:n.formatNumber(t._data.profile.counts.followed_by),following:n.formatNumber(t._data.profile.counts.follows),url:"https://instagram.com/"+t._data.profile.username+"/"})),t._structure.$header.after(t._structure.$panel)):"tag"===t._source.type&&(t._structure.$header=e(t._compileTemplate("headerTag",{name:t._source.tags.map(function(e){return'<a target="_blank" href="https://www.instagram.com/explore/tags/'+e+'/">#'+e+"</a>"}).join(", ")})),t._structure.$content.prepend(t._structure.$header))),t.updateFeed())},n.prototype.updateFeed=function(t){var a=null,r=this;return!(!r._data.feed||!r._structure.$feed)&&(a="tag"===r._source.type?r._source.tags:r._api.isAlternativeApi()?r._data.profile.username:r._data.profile.id,r._api.resetPagination(a),r._api.hasNextPage(a)?r._structure.$root.addClass("instalink-has-pages"):r._structure.$root.removeClass("instalink-has-pages"),r._structure.$feed.html(""),e.each(r._data.feed,function(t,a){var n=null,i=null;i=r._grid.cellWidth>306?a.images.standard_resolution.url:r._grid.cellWidth>150?a.images.low_resolution.url:a.images.thumbnail.url,n=e(r._compileTemplate("post",{url:a.link,pic:i})),"video"===a.type&&n.addClass("instalink-feed-post-video"),r._structure.$feed.append(n)}),0===r._data.feed.length&&r._structure.$feedContainer.append(r._templates.feedEmpty),r._properties.scroll&&r._showScrollbar(),e("img",r._structure.$feed).unbind("load.instaLink-"+r._id).one("load.instaLink-"+r._id,function(){var t=e(this),a=t.closest(".instalink-feed-post");t.closest(".instalink-feed-post").addClass("instalink-feed-post-loaded"),r._adjust(a)}).each(function(){this.complete&&e(this).load()}),t||r._structure.$content.trigger("instalinkReady"),!0)},n.prototype._appendFeed=function(a){var r=null,n=this;return!(!a||!n._structure.$feed)&&(r="tag"===n._source.type?n._source.tags:n._api.isAlternativeApi()?n._data.profile.username:n._data.profile.id,n._api.hasNextPage(r)?n._structure.$root.addClass("instalink-has-pages"):n._structure.$root.removeClass("instalink-has-pages"),e.each(a,function(t,a){var r=null,i=null;i=n._grid.cellWidth>306?a.images.standard_resolution.url:n._grid.cellWidth>150?a.images.low_resolution.url:a.images.thumbnail.url,r=e(n._compileTemplate("post",{url:a.link,pic:i})),"video"===a.type&&r.addClass("instalink-feed-post-video"),n._structure.$feed.append(r)}),e("img",n._structure.$feed).unbind("load.instaLink-"+n._id).one("load.instaLink-"+n._id,function(){var a=e(this);t.setTimeout(function(){a.closest(".instalink-feed-post").addClass("instalink-feed-post-loaded"),n._adjust()},100)}).each(function(){this.complete&&e(this).load()}),n._structure.$feedContainer.animate({scrollTop:"+="+n._grid.cellHeight}),!0)},e.fn.instaLink=function(t){var a={};return e.isPlainObject(t)&&e.each(t,function(e,t){var r="data-il-"+e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});!1===t?t="false":!0===t&&(t="true"),a[r]=t}),this.each(function(t,r){e(r).attr(a),n.init(s++,r).run()}),this},function(){if(!(e&&e.fn&&e.fn.jquery))return!1;e(i)}()}(jQuery,window);